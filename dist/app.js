"use strict";const choice=document.querySelector("#choice"),party=document.querySelector("#party"),themeChoose=document.querySelector(".party-info-theme"),timer=document.querySelector(".party-info-time"),score=document.querySelector(".party-info-score"),grid=document.querySelector(".party-grid");let counter=0,nbPair=0,arrayLonger=0,arrayGrid=[];fetch("../data/data.json").then(e=>e.json()).then(e=>{localStorage.setItem("memory-data",JSON.stringify(e))});const data=JSON.parse(localStorage.getItem("memory-data")),selectEl=document.createElement("select");selectEl.setAttribute("id","select-theme"),selectEl.setAttribute("name","thme"),data.theme.forEach(e=>{const t=document.createElement("option");t.setAttribute("value",`${e}`),t.innerText=`${e}`,selectEl.appendChild(t)}),choice==null||choice.appendChild(selectEl);const divBtn=document.createElement("div");divBtn.setAttribute("class","btn-grid-list");for(let e=4;e<=6;e++){const t=document.createElement("button");t.setAttribute("value",`${e}`),t.classList.add("btn-grid"),t.classList.add(`btn-grid-${e}`),e===4&&t.classList.add("active");const d=document.createElement("img");d.setAttribute("src",`./assets/4x${e}.svg`),d.setAttribute("alt",`Grille 4x${e}`),t.append(d),divBtn.appendChild(t)}choice==null||choice.appendChild(divBtn),disabledBtn(selectEl.value),selectEl.addEventListener("change",function(){disabledBtn(this.value)});function disabledBtn(e){const d=data.data[e].grid.map(a=>a.replace("4x","")),s=document.querySelector(".btn-grid-6"),o=document.querySelector(".btn-grid-5"),i=document.querySelector(".btn-grid-4");d.includes("6")?s==null||s.classList.remove("disabled"):(o==null||o.classList.remove("active"),s==null||s.classList.remove("active"),s==null||s.classList.add("disabled"),i==null||i.classList.remove("disabled"),i==null||i.classList.add("active")),d.includes("5")?o==null||o.classList.remove("disabled"):(s==null||s.classList.remove("active"),o==null||o.classList.remove("active"),o==null||o.classList.add("disabled"),i==null||i.classList.remove("disabled"),i==null||i.classList.add("active"))}const btnPlay=document.createElement("button");btnPlay.classList.add("btn-play"),btnPlay.innerText="PLAY",choice==null||choice.appendChild(btnPlay);const btns=document.querySelectorAll(".btn-grid");btns.forEach(e=>{e.addEventListener("click",()=>{var t;!((t=e.getAttribute("class"))===null||t===void 0)&&t.includes("disabled")||(btns.forEach(d=>{d.classList.remove("active")}),e.classList.toggle("active"))})}),btnPlay.addEventListener("click",function(){const e=document.querySelector(".btn-grid.active");nbPair=4*(e==null?void 0:e.getAttribute("value"))/2,score==null||(score.innerHTML=`${counter} / ${nbPair}`),themeChoose==null||(themeChoose.innerHTML=selectEl.value),arrayLonger=4*(e==null?void 0:e.getAttribute("value"));const t=data.data[selectEl.value].card,d=t.length-arrayLonger/2;t.splice(t.length-d),grid==null||grid.classList.remove("grid-4"),grid==null||grid.classList.remove("grid-5"),grid==null||grid.classList.remove("grid-6"),grid==null||grid.classList.add(`grid-${e==null?void 0:e.getAttribute("value")}`);const s=e==null?void 0:e.getAttribute("value");console.log("===================="),console.log(arrayLonger),console.log(selectEl.value),console.log(s),console.log("====================");const o=[...t,...t];console.log(o);function i(c,n){if(c.length>0){const l=c,m=Math.floor(Math.random()*(l.length-0)+0),u=document.createElement("div");u.classList.add("card"),u.setAttribute("value",`${l[m].value}`);const g=document.createElement("img");g.classList.add("front"),g.setAttribute("src",`./assets/${n}/${l[m].img}`),g.setAttribute("alt",`${l[m].value}`),u.appendChild(g);const b=document.createElement("img");b.classList.add("back"),b.setAttribute("src","./assets/bg-game.jpg"),b.setAttribute("alt","dos de carte"),u.appendChild(b),grid==null||grid.appendChild(u),l.splice(m,1),i(l,n)}else return}i(o,selectEl.value),choice==null||choice.classList.remove("show"),setTimeout(()=>{choice==null||choice.classList.add("hide"),party==null||party.classList.remove("hide"),setTimeout(()=>{party==null||party.classList.add("show")},100)},600);let a="none",r="none";const v=document.querySelectorAll(".card");v.forEach(c=>{c.addEventListener("click",function(){if(c.classList.add("choose"),a!="none"?r=c.getAttribute("value"):a=c.getAttribute("value"),a!="none"&&r!="none"){if(v.forEach(n=>{n.classList.add("temporary-display")}),a===r){counter+=1,a="none",r="none";const n=document.querySelectorAll(".choose");setTimeout(()=>{n.forEach(l=>{l.classList.remove("card"),l.classList.remove("choose"),l.classList.add("alreadychoose"),l.setAttribute("disabled","true"),score==null||(score.innerHTML=`${counter} / ${nbPair}`)}),v.forEach(l=>{l.classList.remove("temporary-display")})},400)}else a="none",r="none",setTimeout(()=>{v.forEach(n=>{n.classList.remove("choose"),n.classList.remove("temporary-display")})},1400);console.log(counter)}counter===nbPair&&nbPair!=0&&setTimeout(()=>{window.alert("Bravo ! Tu as gagn\xE9 !"),location.reload()},600)})})});
